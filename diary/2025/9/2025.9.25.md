# 2025-09-25 の小结

## 汇总

共专注了 94 分钟。

### 今日目标

改AK CF2151，做一道计划的题目

### 今日小结

不错，至少完成了今日目标，以后少犯低级错误。

## 具体

### [18:52 - 19:15] 专注 时段

#### 目标

F

#### 小结

根本看不懂题解。。。

pwx 讲得是啥啊，，，

### [19:15 - 19:32] 懒散 时段

#### 目标

放弃了，只好请教大巨、、、

#### 小结

欸，明天竟然vp ucup，竟然不能组team。。。好在可以直接用qoj账号。。。

### [19:32 - 19:43] 专注 时段

#### 目标

算了，不看题解自己推F把

#### 小结

推出来是这么一坨。。。

$$
ans=\sum_{1\le i\le n}n\cdot a_i+\sum_{2\le len\le n}\sum_f\left[\sum_{1\le i\le len}f_i=n\land\prod_{1<i<len}[f_i\bmod2=1]\land f_1>1\land f_{len}>1\right]\sum_{1\le l\le r\le n\land r-l+1=len}f_i\cdot a_i.
$$

### [19:43 - 19:47] 懒散 时段

#### 目标

我去问问是不是对的

#### 小结

搞错了，竟然是：

$$
ans=\sum_{i=1}^nn\cdot a_i+\sum_{len=2}^n\sum_f\left[\sum_{i=1}^{len}f_i=n\land\prod_{i=2}^{len-1}[f_i\bmod2=1]\land f_1>1\land f_{len}>1\right]\sum_{1\le l\le r\le n\land r-l+1=len}\sum_{j=l}^{r}f_j\cdot a_j.
$$

### [19:47 - 19:54] 懒散 时段

#### 目标



#### 小结

yyz 说应该是对的，姑且接着推吧

### [19:54 - 20:05] 专注 时段

#### 目标

接着啃F

#### 小结

推到这卡住了，问问。

$$
ans=\sum_{i=1}^nn\cdot a_i+\sum_{len=2}^n\sum_f\left[\sum_{i=1}^{len}f_i=n\land\prod_{i=2}^{len-1}\left[f_i\bmod2=1\right]\land f_1>1\land f_{len}>1\right]\sum_{1\le l\le r\le n\land r-l+1=len}\sum_{j=l}^{r}f_{j-l+1}\cdot a_j.
$$

记 $T_{len}=\sum_f\dots\sum_{j=l}^{r}f_{j-l+1}\cdot a_j$

> 这么 Impressive 的公式。

考虑固定 $len$，令 $x,y\in\{1,2\},\forall1<i<len,f_i=2g_i+1,f_1=2g_i+x,f_{len}=2g_i+y,S=n-x-y-len+2$。

$$
T_{len}=\sum_{x,y\in\{1,2\}}\left[S\bmod2=0\right]\sum_{g}\left[\sum_{i=1}^{len}g_i=\frac{S}{2}\right]\sum_{1\le l\le r\le n\land r-l+1=len}\left(a_l(2g_1+x)+a_r(2g_{len}+y)+\sum_{j=l+1}^{r-1}(2g_{j-l+1}+1)a_j\right)
$$

因为 $g_i=\frac{S}{2len}$，所以：

???

### [20:05 - 20:12] 懒散 时段

#### 目标

问清楚

#### 小结

$$
ans=\sum_{i=1}^nn\cdot a_i+\sum_{len=2}^n\sum_f\left[\sum_{i=1}^{len}f_i=n\land\prod_{i=2}^{len-1}\left[f_i\bmod2=1\right]\land f_1>1\land f_{len}>1\right]\sum_{1\le l\le r\le n\land r-l+1=len}\sum_{j=l}^{r}f_{j-l+1}\cdot a_j.
$$

记 $T_{len}=\sum_f\dots\sum_{j=l}^{r}f_{j-l+1}\cdot a_j$

> 这么 Impressive 的公式。

考虑固定 $len$，令 $x,y\in\{1,2\},\forall1<i<len,f_i=2g_i+1,f_1=2g_i+x,f_{len}=2g_i+y,S=n-x-y-len+2$。

$$
T_{len}=\sum_{x,y\in\{1,2\}}\left[S\bmod2=0\right]\sum_{g}\left[\sum_{i=1}^{len}g_i=\frac{S}{2}\right]\sum_{1\le l\le r\le n\land r-l+1=len}\left(a_l(2g_1+x)+a_r(2g_{len}+y)+\sum_{j=l+1}^{r-1}(2g_{j-l+1}+1)a_j\right)
$$

因为 $E[g_i]=\frac{S}{2len}$，所以：

每个位置都应该乘上 $\frac{S}{2len}\cdot\binom{\frac{S}{2}-1}{len-1}$。

不管了，直接观摩题解。

### [20:12 - 20:29] 专注 时段

#### 目标

F

#### 小结

tmd g可以等于0、、、

不是，tmd是没有处理组合数

### [20:29 - 21:15] 懒散 时段

#### 目标

暴躁地改F

#### 小结

吸取了惨痛教训，我决定在代码模板里加上：

```cpp
#ifndef ONLINE_JUDGE
    assert(fac[1]);
#endif
```

### [21:15 - 21:48] 专注 时段

#### 目标

是时候切Div. 1 F了

#### 小结

Give up, 码了4K一般还没打完

### [21:48 - 21:50] 懒散 时段

#### 目标

睡觉

#### 小结

好困

