---
- |
    ## 8.10 总结

    额，不好评价。

    <table><thead><tr><th style="white-space: nowrap;"><span style="cursor: pointer;">
          排名
          <i class="icon-arrow-up"></i></span></th><th style="white-space: nowrap;"><span>用户名</span></th><th style="white-space: nowrap; text-align: center;"><span style="cursor: pointer;">
          分数
          <i class="icon-resize-vertical"></i></span></th> <th style="text-align: center;"><a href="https://gmoj.net/#contest/show/4443/0">叉积（cross）</a> <span style="cursor: pointer;"><i class="icon-resize-vertical"></i></span></th><th style="text-align: center;"><a href="https://gmoj.net/#contest/show/4443/1">波长（hacho）</a> <span style="cursor: pointer;"><i class="icon-resize-vertical"></i></span></th><th style="text-align: center;"><a href="https://gmoj.net/#contest/show/4443/2">排列(permutation)</a> <span style="cursor: pointer;"><i class="icon-resize-vertical"></i></span></th><th style="text-align: center;"><a href="https://gmoj.net/#contest/show/4443/3">捕获（hokaku）｛赛后讨论｝</a> <span style="cursor: pointer;"><i class="icon-resize-vertical"></i></span></th></tr></thead><tr><td><strong><span class="label">12</span></strong></td> <td><a href="https://gmoj.net/#users/2023全智贤"><span class="label label-info">2023全智贤</span></a></td> <!----> <td><div class="table-tight-row"><span class="badge badge-info">88</span> <span class="spacing-slash"></span>  <!----></div></td> <td><div class="table-tight-row"><a href="https://gmoj.net/#main/result/1243006"><span class="badge badge-warning">48</span></a> <span class="spacing-slash"></span>  <!----></div> <!----></td><td><div class="table-tight-row"><a href="https://gmoj.net/#main/result/1243007"><span class="badge badge-warning">30</span></a> <span class="spacing-slash"></span>  <!----></div> <!----></td><td><div class="table-tight-row"><a href="https://gmoj.net/#main/result/1243321"><span class="badge badge-warning">10</span></a> <span class="spacing-slash"></span>  <!----></div> <!----></td><td><div class="table-tight-row"><!----> <!----> <!----></div> <!----></td> <!----></tr></table>

- children:
    - |
        ### T1 【2025HL_NOI模拟二】叉积（cross）

        题意:

        > 在平面直角坐标系 $Oxy$ 上有 $n$ 个点 $A_1,A_2,...,A_n$。
        > $m$ 次询问，每次询问给出一个点 $P$，请找到区间 $[l,r]$，使得 $\sum_{i=l}^r \overrightarrow{OP} \times \overrightarrow{OA_i}$ 最大，并输出这个最大值。

        啊啊啊啊，赛时没看出来叉积有分配律。

        成瞎子了。

    - |
        正解：

        考虑答案就是 $\max\limits_{1\le l\le r\le n}\overrightarrow{OP}\times\sum\limits_{i=l}^r\overrightarrow{OA_i}$。

        求出后面的凸包就行了。

        如何求呢？

        考虑分治。

        $$
        \text{res}_{l,r}=\operatorname{convex-hull}(\text{res}_{l,mid}\cap \text{res}_{mid+1,r}\cap(\text{hull}_r-\text{hull}_l))
        $$

        后面的减法就是闵可夫斯基减。

        <details open class="warning-box" style="background-color: #fff3cd; border-left: 4px solid #ffc107; padding: 10px; margin: 10px 0; border-radius: 4px;"><summary style="margin-bottom: 10px; font-weight: bold; cursor: pointer;"
        >Attention</summary>

        答案应该在 $\text{res}_{0,n}$ 上二分。
        <details open class="warning-box" style="background-color: #fff3cd; border-left: 4px solid #ffc107; padding: 10px; margin: 10px 0; border-radius: 4px;"><summary style="margin-bottom: 10px; font-weight: bold; cursor: pointer;"
        >Attention Again</summary>

        要拆成上下两个凸壳二分。
        <details open class="warning-box" style="background-color: #fff3cd; border-left: 4px solid #ffc107; padding: 10px; margin: 10px 0; border-radius: 4px;"><summary style="margin-bottom: 10px; font-weight: bold; cursor: pointer;"
        >Attention Again And Again</summary>

        注意可以不选，答案至少为 $0$。
        </details>
        </details>
        </details>

- |
    ### T2 【2025HL_NOI模拟二】波长（hacho）

    题意:

    > 对于一个序列 $a$，可以对其进行若干次操作，每次将一个数减少 $1$。
    > 定义 $f_k$ 表示进行 $k$ 次操作后序列的最大子段和最小能达到多少。
    > 给定 $a, K$，计算 $\sum_{k=1}^K f_k$，答案对 $998244353$ 取模。

    <details open class="warning-box" style="background-color: #fff3cd; border-left: 4px solid #ffc107; padding: 10px; margin: 10px 0; border-radius: 4px;"><summary style="margin-bottom: 10px; font-weight: bold; cursor: pointer;"
    >Attention Over And Over Again</summary>

    注意**不**可以不选，答案可以 $\le0$。
    </details>

    不废。

- children:
    - |
        ### T3 【2025-02-20.模拟赛】排列(permutation)

        不好简明概括，就全放了（滚动自取）。

        <details class="info-box" style="background-color: #dcf3ff; border-left: 4px solid #3676ff; padding: 10px; margin: 10px 0; border-radius: 4px;"><summary style="margin-bottom: 10px; font-weight: bold; cursor: pointer;"
        >题意</summary>

        小 $G$ 在期末考试中遇到这样一道题目：

        现在有一个长度为 $n$ 的序列 $a$ （**保证n为偶数**）。对于一个长为 $n$ 的排列 $p$，定义 $f(p)$ 如下：

        定义一个长度为 $n$ 的序列 $b$，满足 $b_i=a_{p_i}$

        现有两个人小 $H$ 和小 $W$ 在博弈，小 $H$ 先手，流程如下：

        $1$.当轮到小 $H$ 操作时，小 $H$ 需要选择一个未被选择的 $1\leq j\leq n$，并将 $b_j$ 加入小 $H$ 自己的分数中
        $2$.当轮到小 $W$ 操作时，小 $W$ 会选择未被选择的 $1\leq j\leq n$ 中最小的一个 $j$，并将 $b_j$ 加入小 $W$ 自己的分数中

        小 $H$ 想要最大化自己的分数，则 $f(p)$ 为小 $H$ 在最优策略下能得到的最大分数是多少。

        现在给定 $n$ 与序列 $a$，要你求出 $\sum_{p是[1,2,...,n]的排列}f(p)$ 对 $998244353$ 取模后的结果。

        小 $G$ 看了一眼，觉得这题简直太水了，于是他决定进行加强。

        现在给定你 $n$ 与序列 $a$，接着有 $q$ 次针对 $a$ 序列的修改，每次修改如下：

        给定 $x,y$，表示将 $a_x\gets a_x+y$，保证 $|y|\leq10$

        你需要在每次修改后求出原问题的答案。

        **保证任意时刻** $\forall 1 \leq i \leq n ,1 \leq a_i\leq 10^6$。

        </details>

    - |
        #### 正解：

        考虑到只跟相对大小有关，试图求出第 $i$ 大的数会被选多少次，设为 $f_{n,k}$，答案就是 $\sum\limits_{k=1}^{n}f_{n,k}a^{sorted}_i$。

        然后就有注意力惊人的拉马努金 pwx 瞪出来了。

        我只看出了 $f_{n,1}=0,f_{n,2}=2(n-2)!$，剩下的读者自己瞪就可以看出来了。

        ~~就知道你们看不出来（逃~~

        <details class="info-box" style="background-color: #dcf3ff; border-left: 4px solid #3676ff; padding: 10px; margin: 10px 0; border-radius: 4px;"><summary style="margin-bottom: 10px; font-weight: bold; cursor: pointer;"
        >˙pǝǝu noʎ llɐ sᴉ uoᴉʇuǝʇʇ</summary>

        设 $f_{n,k}$ 为 $n$ 个数中排名第 $k$ 的贡献。

        $$
        \begin{aligned}
        f_{n,1}&=0(n-1)!*1\\
        f_{n,2}&=0(n-1)!*1+2(n-2)!*1\\
        f_{n,3}&=0(n-1)!*1+2(n-2)!*2+12(n-3)!*1\\
        f_{n,4}&=0(n-1)!*1+2(n-2)!*3+12(n-3)!*3+96(n-4)!*1\\
        f_{n,5}&=0(n-1)!*1+2(n-2)!*4+12(n-3)!*6+96(n-4)!*4+960(n-5)!*1\\
        f_{n,6}&=0(n-1)!*1+2(n-2)!*5+12(n-3)!*10+96(n-4)!*10+960(n-5)!*5+11520(n-6)!*1\\
        \end{aligned}
        $$

        对前 $\frac{n}{2}$ 个数成立。
        
        再注意到：$\forall 1\le k\le n,f_{n,k}+f_{n,n-k+1}=n!$。

        就可以求出 $f_{n,k}$ 了。
        </details>

        然后呢？怎么优化？

    - |
        <details open class="info-box" style="background-color: #dcf3ff; border-left: 4px solid #3676ff; padding: 10px; margin: 10px 0; border-radius: 4px;"><summary style="margin-bottom: 10px; font-weight: bold; cursor: pointer;"
        >优化</summary>

        然后找到规律，直接得出 $f_{n,k} = \sum_{i=1}^{k} 2^{i-2}i! \cdot (n - i)! \cdot \binom{k-1}{i-1}$

        于是化简一下就有 $f_{n,k}=(k-1)!\sum_{i=1}^{k}2^{i-2}(n-i)!i\cdot\frac{1}{(k-i)!}$。

        <details open class="warning-box" style="background-color: #fff3cd; border-left: 4px solid #ffc107; padding: 10px; margin: 10px 0; border-radius: 4px;"><summary style="margin-bottom: 10px; font-weight: bold; cursor: pointer;"
        >ƃuᴉuɹɐM</summary>

        $2^{-1}$ 计算时看作 $0$。
        </details>

        发现是卷积形式，直接就艹过去了。

        结果只有 $60$ 分。

        用 ds（可以不用）$O(\sum \lvert y\rvert)$ 求出答案即可。
        
        </details>


- |
    ## 总评

    $\text{˙pǝǝu noʎ llɐ sᴉ uoᴉʇuǝʇʇ}\forall$
    