---
- |
    ### 8.1 总结

    打挂了.

    T1 $100\to70$

    又是低级错误, 模数挂了...

- children:
    - |
        #### T1

        垃圾找规律.

    - |
        题目大意:

        > 有一张 $n$ 个点的有向图，一开始对于 $i=1,2,\dots,n-1$，$i$ 向 $i+1$ 连了一条边。
        接下来，你可以向图中再加入至多 $m$ 条有向边。允许产生重边、自环。
        然后你从结点 $1$ 开始，在图上随机游走。
        随机游走的方式为：假定当前结点出度为 $d$，则从 $d$ 条出边中以 $\frac{1}{d}$ 的概率均匀随机选择一条出边，并走向这条出边的终点。
        当游走至结点 $n$ 时，停止游走。
        你想要在加边时最大化期望的游走时间。
        输出最大的期望时间对 $p$ 取模的值，数据保证答案在模 $p$ 意义下存在。

        <details open style="background-color: #fff3cd; border-left: 4px solid #ffc107; padding: 10px; margin: 10px 0; border-radius: 4px;">
        <summary style="font-weight: bold; cursor: pointer;">警告</summary>

        $\large\color{red}模 p$
        </details>

        

    - |
        正解:

        找规律, 用等比数列求和或矩阵快速幂.

        我 11:25 时找到规律, 因为 11:40 就要结束了, 就拷了个矩乘板子.

        结果忘改模数了, 主要还是因为没吃早餐, 饿的头昏眼花...

- |
    #### T2

    放了一堆图片, 根本点不进去, 太卡了!!!

    https://www.luogu.com.cn/problem/P8554

    但是数据拉到了 $n=7000$, 我改的 $O(108N^2)$ 连 $3000$ 都过不去, 太丢人了...

    发现直接计数很难, 考虑将其与一个颜色序列建立双射, 对颜色序列技术即可.

    需要状态压缩, 否则常数过大, 需要 $108\to11$ ...

- children:
    - |
        #### T3

        神奇普及组题目...

        https://uoj.ac/problem/659

        只用了树剖(可以只用倍增), ~~但我两个都不会.~~

    - |

        直接看数据范围(数据中第4个子任务性质错了...竟然是B性质):

        | 子任务编号 |    $n \leq$     |    $q \leq$     | $op \leq$ |  特殊性质  | 分值  |
        | :--------: | :-------------: | :-------------: | :-------: | :--------: | :---: |
        |    $1$     |     $3000$      |     $5000$      |    $1$    |     无     |  $3$  |
        |    $2$     | $5 \times 10^4$ | $2 \times 10^5$ |    $0$    | $\text{A}$ |  $7$  |
        |    $3$     | $5 \times 10^4$ | $2 \times 10^5$ |    $1$    | $\text{A}$ | $10$  |
        |    $4$     | $1\times 10^5$  | $4 \times 10^5$ |    $1$    | $\text{A}$ | $15$  |
        |    $5$     | $1\times 10^5$  | $6 \times 10^5$ |    $1$    | $\text{B}$ |  $5$  |
        |    $6$     | $5 \times 10^4$ | $2 \times 10^5$ |    $0$    |     无     | $10$  |
        |    $7$     | $1\times 10^5$  | $4 \times 10^5$ |    $0$    |     无     | $10$  |
        |    $8$     | $5 \times 10^4$ | $2 \times 10^5$ |    $1$    |     无     | $14$  |
        |    $9$     | $1\times 10^5$  | $6 \times 10^5$ |    $1$    |     无     | $16$  |
        |    $10$    | $2\times 10^5$  | $1 \times 10^6$ |    $1$    |     无     | $10$  |

        关于 $O(nq)+B$ 有前 $5$ 档这件事

    - |
        观察 $3$ 分代码:

        ```cpp
        for (int i = x; i <= y; ++i)
        {
            if (ch[i] == '&')
            {
                v &= a[i];
            }
            else if (ch[i] == '|')
            {
                v |= a[i];
            }
            else if (ch[i] == '^')
            {
                v ^= a[i];
            }
            else if (ch[i] == '+')
            {
                v += 1;
            }
        }
        ```

        改成

    - |

        ```cpp
        for (int i = x; i <= y; ++i)
        {
            if (ch[i] == '&')
            {
                v &= a[i];
            }
            else if (ch[i] == '|')
            {
                v |= a[i];
            }
            else if (ch[i] == '^')
            {
                v ^= a[i];
            }
            else /* if (ch[i] == '+') */
            {
                // v += 1;
                v += a[i];
            }
        }
        ```

        就多了 $17$ 分...

        真无语...

- |
    ### 总评

    还是要吃早餐...

    一定要注意常数...