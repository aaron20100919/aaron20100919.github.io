---
- |
    ### 1.16 总结

    以为自己过了T2,就啥也没加被hack了.

    好在T1的经典trick之前(大家)都打过,拿了高档部分分,很可惜差一步到正解.

    要培养精益求精的探索精神!!.

- |
    #### T1 博弈纪元之双王的终局（game） 

    大概就是, 有两个人在一个长度为 $ n $ 的序列 $ c $ 上玩一个游戏：  
    - **A 王** 先手，选的技能值为 $ a $，且 $ a $ 在 $[l_a, r_a]$ 中随机选取；  
    - **B 王** 后手，选的技能值为 $ b $，且 $ b $ 在 $[l_b, r_b]$ 中随机选取；  
    - 每回合的操作：  
      - 若当前是 A 的回合，他必须选择一个下标 $ x $ 满足 $ c_x \ge a $，然后把 $ c_x $ 减少 $ a $；  
      - 若当前是 B 的回合，他必须选择一个下标 $ x $ 满足 $ c_x \ge b $，然后把 $ c_x $ 减少 $ b $；  
      - 如果当前玩家找不到满足条件的 $ x $，则他输。  
    - 两人都绝对聪明（最优策略）。  

    问：在 $ a, b $ 等概率从给定区间选择的情况下，**A 获胜的概率**（模 $ 998244353 $）。

    发现是经典博弈,就是对$a+b$取模分讨,然后从大到小选.

    影响很深刻,是之前的某道CF诈骗D题,因此做了单次询问的70分.

    后来发现fix a+b时a能赢是一段前缀,拼个二分就行了.

- |
    #### 混沌纪元之好区间的法则（chaos）

    给定一个长度为 $n$ 的序列 $a$，一个区间 $[l, r]$ 是“好区间”当且仅当：对于区间内的任意两个不同元素 $a_i, a_j$，都有  
    $$
    \frac{a_i a_j}{a_i + a_j} \le \sum_{k=l, k\neq i, k\neq j}^r a_k
    $$  
    即两数“协同效应”不大于区间内其余数的和。  

    有 $q$ 次操作：  
    1. 修改某个 $a_x$ 为 $y$；  
    2. 询问区间 $[x, y]$ 内最长好区间的长度。

    赛时光速想了个假的分治,就是找到区间max和次大值,然后check是否合法,不合法就往剔除一段前缀或一段后缀递归,(大样例)跑的飞快,就不管了.


    结果被hack了只有20分,每次询问加上记忆化就有35分,学习chd精益求精hack的精神打一个时间戳优化就是正解复杂度!!!
